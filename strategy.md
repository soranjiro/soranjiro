# soranjiro Portfolio Dashboard — 戦略設計ドキュメント

## 1. 目的の定義（定量的）

### ゴール
GitHub データを活用した **動的に更新されるポートフォリオサイト** を構築する。AI エージェントが定期的にデータを更新し、サイト自体が「自分の技術力を証明するプロダクト」として機能する。

### 成功指標
| 指標 | 現状 | 目標 |
|------|------|------|
| ページ構造 | データ羅列型 | ストーリーテリング型（Projects → Activity → Skills の流れ） |
| テーマ対応 | ダークのみ | ダーク/ライト切替対応 |
| 時系列グラフの粒度 | 年次(4点) | 月次(37+点) |
| ファーストビューの印象 | 数字の羅列 | ビジュアルグラフ + プロジェクトカード |
| チーム開発アピール度 | なし | Org 活動・PR/Review を明確に可視化 |
| Tech Stack 表示密度 | 余白過多 | コンパクトで情報密度の高い表示 |
| アニメーション品質 | 基本 reveal のみ | レーダーチャート描画アニメ + スクロールトリガー |

---

## 2. 課題・制約の特定

### 現状の課題
1. **数字の羅列がダサい** — Metrics Strip（6つの数値カード）がページ上部で最初に目に入るが、ビジュアルインパクトがない
2. **ダークモードのみ** — ライトモード非対応、文字の可読性がテーマに依存
3. **Yearly Contributions が棒グラフ** — 4年分しかなく、時系列変化が見えにくい。チーム開発感が伝わらない
4. **レーダーチャートにアニメーションなし** — 初期表示時の印象が弱い
5. **Tech Stack の余白** — `flex` レイアウトでカテゴリが伸びすぎ、密度が低い
6. **Pinned Repositories が最下部** — ポートフォリオの「実績」セクションとして最も重要なのに後回し
7. **セクション順序が非最適** — 採用者視点で「何を作った人か」が最初に伝わらない

### 技術的制約
- 静的 HTML 出力（SSG 型）— すべて Node.js スクリプトで generate
- Chart.js v4 CDN 依存
- Devicon CDN でアイコン表示
- GitHub Pages or Vercel でホスティング想定
- `data.json` に日別カレンダーデータあり → 月次集計可能

---

## 3. 既存ソリューション・SOTA 調査

### 参考サイト分析

#### Brittany Chiang (brittanychiang.com)
- **構造**: About → Experience → Projects → Writing
- **強み**: ミニマルで洗練、プロジェクトが前面、スクロール追従のナビゲーション
- **学び**: **Projects を上部に配置**して「何をした人か」を即座に伝える
- **Gap**: データ可視化なし（テキストベース）、動的更新なし

#### Matt Farley (mattfarley.ca)
- **構造**: Hero → About → Skills → Projects → Testimonials → Contact
- **強み**: プロジェクト画面のスクリーンショットが大きく印象的、協業先ロゴの並び
- **学び**: **実績の見せ方**（画像 + 短い説明）と**企業コラボの可視化**
- **Gap**: データドリブンではない

#### Josh Comeau のポートフォリオ指南書の知見
- **ターゲットオーディエンス**: 採用担当 + エンジニアリングマネージャー
- **最も効果的な要素**: プロジェクトの深掘り（技術選定の理由、課題と解決策）
- **よくある間違い**: テンプレート型レイアウト、具体性のないスキル一覧
- **学び**: 「ツアーガイド型」— 見る人を案内するようにストーリーを組む

### ポートフォリオのベストプラクティス（統合知見）

| 原則 | 説明 | 適用方法 |
|------|------|----------|
| **Projects First** | 実績を最初に見せる | Pinned Repos をヒーロー直下に配置 |
| **ストーリーテリング** | 数字の羅列ではなく文脈を持たせる | グラフとセクション間の流れで成長を語る |
| **チーム開発の証明** | 個人開発だけでなく協業力を示す | Org 活動、PR/Review 比率、Issue 対応 |
| **視覚的インパクト** | ファーストビューで惹きつける | アニメーション付きチャート + プロジェクトカード |
| **テーマ対応** | 見る環境に適応 | ダーク/ライトモード切替 |
| **差別化** | 「AI エージェントで動的更新」を技術力として見せる | フッターや About で明記 + 更新頻度の可視化 |

---

## 4. 競合・トレンド分析

### 2025-2026 の開発者ポートフォリオトレンド

1. **Bento Grid レイアウト** — 既に採用済み ✅
2. **データ可視化による差別化** — GitHub Stats の視覚化はありだが、ほとんどのポートフォリオは静的テキスト。動的チャートは差別化要因
3. **ダーク/ライトモード対応** — 必須。CSS Variables + `prefers-color-scheme` + トグルボタン
4. **マイクロアニメーション** — Scroll-triggered reveals、チャート描画アニメ
5. **AI による自動生成** — 最先端。ほとんどのポートフォリオは手動更新。AI 自動更新は大きな差別化
6. **インタラクティブ要素** — ホバーエフェクト、チャートのツールチップ

### 使用ライブラリ / ツール

| ツール | 用途 | 現状 |
|--------|------|------|
| Chart.js v4 | チャート描画 | 使用中 ✅ |
| Devicon | 技術アイコン | 使用中 ✅ |
| CSS Variables | テーマ管理 | 部分的 — ライト対応必要 |
| `prefers-color-scheme` | OS テーマ検出 | 未実装 |
| Intersection Observer | スクロールアニメ | 未実装 |

---

## 5. アプローチの提案

### セクション構成（再設計）

```
┌─────────────────────────────────────────────┐
│  HEADER                                      │
│  Avatar + Name + Roles + Theme Toggle        │
│  LLM Summary (Profile)                       │
├─────────────────────────────────────────────┤
│  FEATURED PROJECTS (Pinned Repos)  ★ 先頭へ  │
│  2x2 カード + スクリーンショット/言語バー      │
├─────────────────────────────────────────────┤
│  ACTIVITY & COLLABORATION  ★ チーム感         │
│  ┌──────────────┬──────────────────────────┐ │
│  │ Radar Chart  │ Contribution Timeline    │ │
│  │ (animated)   │ (月次折れ線グラフ)        │ │
│  │ PRs/Reviews/ │ Commits + PRs + Reviews  │ │
│  │ Issues/      │ 37+データポイント         │ │
│  │ Commits      │                          │ │
│  └──────────────┴──────────────────────────┘ │
├─────────────────────────────────────────────┤
│  METRICS OVERVIEW  ★ リデザイン              │
│  小型バッジまたはインラインで                  │
│  数字→ミニチャート/プログレスバーに置換        │
├─────────────────────────────────────────────┤
│  LANGUAGES & TECH STACK  ★ 統合/コンパクト    │
│  ┌──────────────────┬──────────────────────┐ │
│  │ Language Evo     │ Distribution +       │ │
│  │ (月次 Line)      │ Tech Stack (compact) │ │
│  └──────────────────┴──────────────────────┘ │
├─────────────────────────────────────────────┤
│  ORGANIZATIONS & AI COLLAB                   │
│  Org bars + Copilot ring                     │
├─────────────────────────────────────────────┤
│  FOOTER                                      │
│  "Auto-generated by AI Agent" + timestamp    │
└─────────────────────────────────────────────┘
```

### 各アプローチの Pros/Cons

#### A) Projects First アプローチ（推奨）
- **Pros**: 採用者は「何を作った人か」を最初に知りたい。Pinned Repos は本人が選んだ代表作。即座に技術力の幅が伝わる
- **Cons**: Profile Summary が下がるため、「誰か」の把握が遅れる可能性
- **対策**: Header に Role tags + Summary を含めることで補完（現状既に実装）

#### B) Stats First アプローチ（現状）
- **Pros**: 数字で活動量がわかる
- **Cons**: ユーザー指摘の通り「ダサい」。数値羅列は採用者にとって無意味ではないが引きが弱い
- **結論**: ❌ 不採用

#### C) Hybrid: Hero + Mini-Metrics + Projects
- **Pros**: Hero セクション内に小さな metrics バッジ（既存）+ すぐ下に Projects
- **Cons**: Hero が重くなりすぎる可能性
- **結論**: A と近い形で採用検討

---

## 6. 具体的な実装設計

### 6.1 ダーク/ライトモード

#### 実装方針
```
[data-theme="light"] {
  --bg: #f8f7f4;
  --bg-elevated: #ffffff;
  --card-bg: #ffffff;
  --card-inner: #f3f2ef;
  --text-primary: #1a1a1a;
  --text-secondary: #5c5c5c;
  --text-dim: #9a9a9a;
  --border: rgba(0,0,0,0.08);
  --border-hover: rgba(0,0,0,0.15);
  --accent: #c4872e;
  ...（他の色も調整）
}
```

- `prefers-color-scheme: dark` をデフォルトで検出
- トグルボタンを Header 右上に配置（☀/🌙 アイコン）
- `localStorage` で選好を保存
- Chart.js のグリッドライン・テキスト色も動的変更

#### ライトモードのカラーパレット
- 背景: ウォームベージュ系 `#f8f7f4` — 真っ白ではなく温かみ
- カード: `#ffffff` with subtle shadow
- テキスト: `#1a1a1a` (primary) / `#5c5c5c` (secondary)
- アクセント: 現ダークの金色を少し深く `#c4872e`
- グラフカラー: 彩度を少し落として目に優しく

### 6.2 レーダーチャートのアニメーション

Chart.js v4 の `animation` オプションを活用:

```javascript
options: {
  animation: {
    duration: 1500,
    easing: 'easeOutQuart',
    delay: (ctx) => ctx.dataIndex * 100,
  },
  // 各ポイントが順番に広がっていくアニメーション
}
```

さらに Intersection Observer で画面内に入った時にのみ描画開始:

```javascript
const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      // Chart を初期化
      observer.unobserve(entry.target);
    }
  });
}, { threshold: 0.3 });
```

### 6.3 Metrics Strip のリデザイン

**現状**: 6 つの数字カードが横並び → 「ダサい」

**新デザイン案**: Metrics を廃止し、Activity Radar と Contribution Timeline に統合

- Commits, PRs, Reviews, Issues, Comments → Radar Chart に既に含まれている
- Contributed To, Organizations → Header の badges に既に含まれている
- 残す場合、Hero セクション内の小型バッジ（現状の 3+Years / 60 Repos / 8 Followers）に統合

**結論**: Metrics Strip を削除し、そのデータは Radar Chart ツールチップ + Header バッジに統合。ページの見た目がすっきりし、「数字の羅列」問題を解消。

### 6.4 Yearly Contributions → 月次折れ線グラフ（チーム開発感）

**データソース**: `yearlyContributions[].calendar[]` — 日別データあり → 月次集計可能

**計算方法**:
```javascript
// 全年の calendar を結合し、月別に集計
const monthlyData = {};
yearlyContributions.forEach(year => {
  year.calendar.forEach(day => {
    const month = day.date.substring(0, 7); // "2024-03"
    monthlyData[month] = (monthlyData[month] || 0) + day.count;
  });
});
```

利用可能なデータ（確認済み）:
```
2023-01: 3,  2023-02: 16, ..., 2023-12: 9
2024-01: 39, 2024-02: 23, ..., 2024-12: 87
2025-01: 65, 2025-02: 143, ..., 2025-12: 495
2026-01: 184, 2026-02: 220
```
→ **37ヶ月分のデータポイント** で滑らかな折れ線グラフが描ける

**チャート設計**:
- type: `line` — エリアチャート（fill: true, stacked）
- データセット:
  - Total Contributions（面グラフ、メインカラー）
  - PR + Reviews を別レイヤで重ね描き（チーム活動の指標）
- x 軸: 月ラベル（`Jan '23`, `Feb '23`, ...）— 3ヶ月ごとに表示
- y 軸: contribution 数
- タイトル: "Contribution Timeline" もしくは "Growth & Collaboration"
- **チーム感の演出**: PR + Reviews の割合が増えていることを強調するツールチップ

**注意**: yearly の stats には `commits`, `prs`, `reviews` の月別内訳がないが、calendar の count は total contributions。PR/Review の月別分解はデータ制約上困難。代替として:
- カレンダーの count をメインラインとして使用
- 年間の PR/Review 比率を注釈として表示
- または org ごとの活動量を重ねる

### 6.5 Tech Stack リデザイン

**現状の問題**: `flex: 1; min-width: 160px` でカテゴリが均等に広がり、1アイテムしかない ML/Data が大きなスペースを占有

**改善案**:
```css
.tech-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(72px, 1fr));
  gap: 10px;
}
```

- カテゴリ分けを維持しつつ、グリッド内でアイテムをコンパクトに並べる
- `width: 62px` → `width: 56px` に縮小
- カテゴリラベルを `span 全幅` で配置
- または: カテゴリを横並びではなく上下に配置し、アイテムは横にぎっしり詰める

### 6.6 Pinned Repos を先頭配置

**`generate-dashboard.mjs` の変更**:

```javascript
// 現在の順序
renderStats(data)
renderActivity(data)
renderLanguages(data)
renderOrgs(data)
renderCopilot(data)
renderTechStack(data)
renderRepos(data)     // ← 最後

// 新しい順序
renderRepos(data)     // ← 先頭に移動（Hero直下）
renderActivity(data)  // Radar + Timeline
renderLanguages(data) // Language Evolution + Distribution
renderTechStack(data) // コンパクト版
renderOrgs(data)      // Org活動
renderCopilot(data)   // AI Collaboration
```

**Repos カードのリデザイン**:
- `repos-overview` テキストは削除または Summary ブロックに統合
- カードにもう少し高さを持たせ、言語バーを太くする
- ホバー時にアクセントカラーのボーダーを付ける

---

## 7. 仮説 → 検証サイクル

### MVP（最小実行可能プロダクト）— Phase 1

| # | タスク | 優先度 | 複雑度 |
|---|--------|--------|--------|
| 1 | ダーク/ライトモード切替の実装 | 高 | 中 |
| 2 | Metrics Strip 削除 | 高 | 低 |
| 3 | Pinned Repos をヒーロー直下に移動 | 高 | 低 |
| 4 | Yearly Contributions → 月次折れ線グラフ | 高 | 中 |
| 5 | レーダーチャートにアニメーション追加 | 中 | 低 |
| 6 | Tech Stack レイアウト改善 | 中 | 低 |

### Phase 2（拡張）

| # | タスク | 優先度 | 複雑度 |
|---|--------|--------|--------|
| 7 | Language Evolution チャートも月次化 | 中 | 中 |
| 8 | スクロールトリガーアニメーション（Intersection Observer） | 中 | 中 |
| 9 | チャートのテーマ動的切替 | 中 | 中 |
| 10 | レスポンシブ最適化の見直し | 低 | 中 |

### 検証方法
1. **ビジュアル検証**: `python3 -m http.server` でローカル確認 → ブラウザで Light/Dark 切替テスト
2. **データ検証**: 月次集計の正確性を `data.json` のカレンダーデータと照合
3. **操作検証**: テーマ切替のちらつき（FOUC）がないか確認
4. **機能検証**: Chart.js のアニメーションがスクロール時に正しくトリガーされるか

### 仮説
- **H1**: Pinned Repos を先頭に置くことで、「何ができる人か」が3秒以内に伝わる
- **H2**: 月次折れ線グラフにすることで、活動量の成長トレンドが明確に見える
- **H3**: Metrics Strip を削除しても情報は失われない（Radar + Header badges で補完）
- **H4**: ダーク/ライト切替でユーザー体験が向上し、様々な環境での可読性が確保される

---

## 8. 実装上の注意点

### Chart.js テーマ連動
Chart.js はインスタンス生成時に色が固定されるため、テーマ切替時にチャートを再描画（`chart.destroy()` → 再生成）するか、`chart.options` を動的に更新して `chart.update()` を呼ぶ必要がある。

### FOUC 対策
ライトモード時のフラッシュ防止のため、`<script>` をヘッドに配置して `localStorage` からテーマを即座に適用:

```html
<script>
  const t = localStorage.getItem('theme') ||
    (matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
  document.documentElement.setAttribute('data-theme', t);
</script>
```

### 月次データ集計の正確性
- カレンダーデータは各 yearlyContribution の期間分（1月12日〜翌年1月12日）
- 年をまたぐ月（1月）は重複カウントに注意 → Set でデータごとに重複排除

---

## まとめ

このポートフォリオは「GitHub データを AI エージェントが動的に更新する」というコンセプト自体が大きな差別化要因。データ可視化の質を上げ、セクション順序を採用者視点に最適化し、テーマ対応で技術力を示すことで、**ポートフォリオサイト自体がプロジェクトの一つ**として高いアピール力を持つ。
